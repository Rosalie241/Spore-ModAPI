<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>The cheat console | Spore ModAPI SDK for creating C++ mods for Spore</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark.css" />
  <link rel="stylesheet" href="m-documentation.css" />
  <link rel="icon" href="Spore_ModAPI_Icon.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m"><img src="Spore_ModAPI_Icon.png" alt="" />Spore ModAPI <span class="m-thin">SDK for creating C++ mods for Spore</span></a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Tutorials</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="3">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          The cheat console
        </h1>
        <p>How to print text to the console and add new cheats.</p>
<p>If you want to see an example of real mods that add new cheats, check the <a href="https://github.com/emd4600/Spore-ModAPI/tree/master/Projects/Example%20Projects/GmdlExport"><code>GmdlExport</code></a> and the <a href="https://github.com/emd4600/Spore-ModAPI/tree/master/Projects/Example%20Projects/ModCreatorKit"><code>ModCreatorKit</code></a></p><section id="Cheats-Console"><h2><a href="#Cheats-Console">Printing to the console</a></h2><p>You can print text to the console using the <a href="namespace_app.html#a5cfc09513c296a1468b99530df311f4f" class="m-doc">App::<wbr />ConsolePrintF()</a> method. It works like the <a href="http://www.cplusplus.com/reference/cstdio/printf/">C++ printf</a> method.</p><pre class="m-code"><span class="n">App</span><span class="o">::</span><span class="n">ConsolePrintF</span><span class="p">(</span><span class="s">&quot;Hello World!&quot;</span><span class="p">);</span><span class="w"></span></pre><p>You can use &quot;format specifiers&quot; to print the value of variables. For example, <code>d</code> can be used to print integers, and <code>f</code> to print floats:</p><pre class="m-code"><span class="n">App</span><span class="o">::</span><span class="n">ConsolePrintF</span><span class="p">(</span><span class="s">&quot;Integer: %d     Float: %f&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="mf">4.5f</span><span class="p">);</span><span class="w"></span></pre><p>That prints <code>Integer: 10 Float: 4.5</code></p></section><section id="Cheats-Creating"><h2><a href="#Cheats-Creating">Adding a new cheat</a></h2><p>Cheats use the <a href="namespace_arg_script.html" class="m-doc">ArgScript</a> scripting language, which is the same used in many Spore files (such as <code>.prop.prop_t</code>). You have more info in the <a href="https://github.com/emd4600/SporeModder-FX/wiki/ArgScript">SporeModderFX wiki</a>.</p><p>To create a new cheat we have to create a class that parses an <a href="namespace_arg_script.html" class="m-doc">ArgScript</a> command. You can use the *&quot;ModAPI Cheat* item template to create one. It
basically creates a class like this:

@icode{cpp} 
using namespace ArgScript;

class MyCheat 
    : public ICommand
{
public:
    void ParseLine(const Line&amp; line) override;
    const char* GetDescription(DescriptionMode mode) const override;
};
@endicode 

The simplest method is &lt;tt&gt;GetDescription()&lt;/tt&gt;; there you just have to return a description of your cheat, that is showed when executing the &lt;tt&gt;help&lt;/tt&gt; command.
Depending on the &lt;tt&gt;mode&lt;/tt&gt; parameter you can return a more complex description which is shown when executing &lt;tt&gt;help mycheat&lt;/tt&gt;.

@icode{cpp} 
const char* MyCheat::GetDescription(DescriptionMode mode) const {
    if (mode == DescriptionMode::Basic) {
        return &quot;This is a basic description&quot;;
    } else {
        return &quot;MyCheat: does something like this.<br />&quot;
                &quot; You can include line breaks.<br />&quot;
    }
}
@endicode 

&lt;tt&gt;ParseLine()&lt;/tt&gt; is the method called when the player executes the cheat. The &lt;tt&gt;line&lt;/tt&gt; parameter has information about the arguments and options that the player wrote.

You can add the cheat in your &lt;tt&gt;Initialize()&lt;/tt&gt; method. Cheat names are case-insensitive:
@icode{cpp} 
CheatManager.AddCheat(&quot;myCheat&quot;, new MyCheat());
@endicode 

@section Cheats-Processing Processing the cheat line

Let&#x27;s see an example of how to process arguments and options typed by the player in the cheat; this is done by calling functions on the &lt;tt&gt;line&lt;/tt&gt; parameter.
Check the ArgScript::Line documentation. The main functions you must know are &lt;tt&gt;GetArguments()&lt;/tt&gt; and &lt;tt&gt;GetOption()&lt;/tt&gt;, which return a list of strings.
For example, if I have the line &lt;tt&gt;mycheat 3 water -option (0.3, 0, 1.0)&lt;/tt&gt;:
 - &lt;tt&gt;line.GetArguments(2)&lt;/tt&gt; will return a list with &quot;3&quot;, &quot;water&quot;.
 - &lt;tt&gt;line.GetOption(&quot;option&quot;, 1)&lt;/tt&gt; will return a list with &quot;(0.3, 0, 1.0)&quot;.

The numeric argument in those functions is how many arguments were expected; this means that if the player had only typed one argument, the first function
would have raised an exception, that is shown to the user in the console. The returned list contains strings, but you can convert those elements to integers,
floats, colors,... with the &lt;tt&gt;mpFormatParser&lt;/tt&gt; member:

@icode{cpp} 
void MyCheat::ParseLine(const Line&amp; line)
{
    auto args = line.GetArguments(2);
    int val = mpFormatParser-&gt;ParseInt(args[0]);
    // In the above example, val = 3 and args[1] = &quot;water&quot;

    args = line.GetOption(&quot;option&quot;, 1);
    ColorRGB color = mpFormatParser-&gt;ParseColorRGB(args[0]);
}
@endicode 

@section Cheats-Examples

@subsection Example 1: Planet Buster cheat

This cheat gives you a planet buster bomb, only if you are in the space stage. Optionally, the player can write
an argument which will be the number of bombs received. Fopr more information about Simulator, check the
&lt;a href=&quot;_simulator_basic.html&quot; &gt;\&quot;Interacting with the Simulator\&quot;&lt;/a&gt; tutorial.

@icode{cpp} 
// This is in dllmain.cpp

using namespace ArgScript;

class PlanetBusterCheat 
    : public ICommand
{
public:
    void ParseLine(const Line&amp; line) {
        if (IsSpaceGame()) {
            cSpaceToolDataPtr tool;
            ToolManager.LoadTool({id(&quot;PlanetBusterBomb&quot;), 0, 0}, tool);
            
            size_t numArgs;
            auto args = line.GetArgumentsRange(&amp;numArgs, 0, 1);
            if (numArgs == 1) {
                tool-&gt;mCurrentAmmoCount = mpFormatParser-&gt;ParseInt(args[0]);
            }
            
            auto inventory = SimulatorSpaceGame.GetPlayerInventory();
            inventory-&gt;AddItem(tool.get());
        }
    }
    
    const char* GetDescription(DescriptionMode mode) const {
        return &quot;Call the cheat. Drop the bomb. BOOM!&quot;;
    }
};

void Initialize() {
    CheatManager.AddCheat(&quot;planetBuster&quot;, new <a href="_object_8h.html#a2e82adf9870bdb442cdcf2b3e01315b2" class="m-doc">PlanetBusterCheat()</a>); }</p></section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v2.js"></script>
<script src="searchdata-v2.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>Spore ModAPI SDK for creating C++ mods for Spore. Created with <a href="https://doxygen.org/">Doxygen</a> 1.9.8 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
